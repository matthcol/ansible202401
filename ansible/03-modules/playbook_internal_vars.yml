---
- name: Prepare FS
  hosts: nodeserver
  become: yes
  vars:
    app_dir: /usr/src/app
    owner: ender
  tasks:
    - name: Debug var app_dir
      ansible.builtin.debug:
        var: app_dir
    - name: Create directory
      ansible.builtin.file:
        path: "{{ app_dir }}"
        state: directory
        owner: "{{ owner }}"
        group: "{{ owner }}"
        mode: 0750
    - name: Copy artifact
      ansible.builtin.copy:
        src: /mnt/artifacts/app.js
        dest: "{{ app_dir }}"
        owner: "{{ owner }}"
        group: "{{ owner }}"
        mode: 0640